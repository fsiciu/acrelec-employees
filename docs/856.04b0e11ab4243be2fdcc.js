"use strict";(self.webpackChunkacrelec_employees=self.webpackChunkacrelec_employees||[]).push([[856],{856:(S,p,r)=>{r.r(p),r.d(p,{EmployeesListModule:()=>x});var c=r(583),u=r(474),a=r(653),e=r(639),g=r(215);let d=(()=>{class n{constructor(){this.display=new g.X({isOpen:!1,employee:void 0})}watch(){return this.display.asObservable()}open(t){this.display.next({isOpen:!0,employee:t})}close(t){this.display.next({isOpen:!1,employee:t})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var y=r(2),f=r(304),h=r(917),C=r(340),_=r(841);let v=(()=>{class n{constructor(t){this.http=t,this.mapEmployees=o=>o.map(l=>({firstName:l.FirstName,secondName:l.SecondName,position:l.Position,id:l.Id,details:l.Details,blocked:l.Blocked})).sort((l,s)=>l.firstName.localeCompare(s.firstName))}getEmployees(){return this.http.get(`${C.N.MOCK_DATA}`).pipe((0,y.U)(this.mapEmployees),(0,f.K)(t=>(console.log("Error message: ",t.message),(0,h.of)([]))))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(_.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var m=r(665);function E(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1),e.NdJ("click",function(){return e.CHM(t),e.oxw().close()}),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.NdJ("click",function(l){return l.stopPropagation()}),e.TgZ(4,"div",4),e.TgZ(5,"h3"),e._uU(6,"Delete Employee"),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"p"),e._uU(9,"Are you sure you want to remove "),e.TgZ(10,"strong"),e._uU(11),e.qZA(),e._uU(12," ?"),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"button",7),e.NdJ("click",function(){const s=e.CHM(t).ngIf;return e.oxw().onDeleteClick(null==s?null:s.employee)}),e._uU(15," Delete "),e.qZA(),e.TgZ(16,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().close()}),e._uU(17," Cancel "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=i.ngIf;e.xp6(1),e.ekj("open",null==t?null:t.isOpen),e.xp6(10),e.AsE("",null==t||null==t.employee?null:t.employee.firstName," ",null==t||null==t.employee?null:t.employee.secondName,"")}}let M=(()=>{class n{constructor(t){this.modalService=t}ngOnInit(){this.display$=this.modalService.watch()}close(){this.modalService.close()}onDeleteClick(t){this.modalService.close(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-dialog"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"modal",3,"click"],[1,"modal-centered"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-primary","mr-1",3,"click"],[1,"btn","btn-secondary",3,"click"]],template:function(t,o){1&t&&(e.YNc(0,E,18,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,o.display$))},directives:[c.O5],pipes:[c.Ov],styles:[".modal[_ngcontent-%COMP%]{visibility:hidden;opacity:0;display:block;position:fixed;top:0;left:0;width:100%;height:100%;outline:0;background:rgba(0,0,0,.4);transition:opacity .25s ease-in;z-index:1072;overflow-x:hidden;overflow-y:auto}.modal.open[_ngcontent-%COMP%]{visibility:inherit;opacity:1}.modal[_ngcontent-%COMP%]   .modal-centered[_ngcontent-%COMP%]{position:relative;width:auto;display:flex;align-items:center;max-width:50rem;min-height:calc(100% - 3.5rem);margin:1.75rem auto}.modal[_ngcontent-%COMP%]   .modal-centered[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;width:100%;pointer-events:auto;background-color:#fff;background-clip:padding-box;border:.1rem solid rgba(0,0,0,.2);box-shadow:0 0 .8rem .4rem #0000001a;border-radius:.3rem;outline:0}.modal[_ngcontent-%COMP%]   .modal-centered[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;background-color:#f4f4f4;justify-content:space-between;padding:1rem;border-bottom:.1rem solid lightgray;border-top-left-radius:calc(.3rem - 1px);border-top-right-radius:calc(.3rem - 1px)}.modal[_ngcontent-%COMP%]   .modal-centered[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{position:relative;display:flex;flex:1 1 auto;padding:1rem}.modal[_ngcontent-%COMP%]   .modal-centered[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-end;padding:.75rem;border-top:.1rem solid lightgray;border-bottom-right-radius:calc(.3rem - .1rem);border-bottom-left-radius:calc(.3rem - .1rem)}"]}),n})(),b=(()=>{class n{constructor(){this.deleteEmployeeEvent=new e.vpe,this.editEmployeeEvent=new e.vpe}onDeleteClick(t){this.deleteEmployeeEvent.emit(t)}onEditClick(t){this.editEmployeeEvent.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-employee"]],inputs:{employee:"employee"},outputs:{deleteEmployeeEvent:"deleteEmployeeEvent",editEmployeeEvent:"editEmployeeEvent"},decls:14,vars:8,consts:[[1,"card"],[1,"flex-grow-1"],[1,"info"],["alt","user-placeholder",1,"img-container",3,"src"],[1,"btn-actions"],[1,"btn","btn-primary","mr-1",3,"click"],["alt","user-delete",3,"src"],[1,"btn",3,"ngClass","disabled","click"],["alt","user-edit",3,"src"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"img",3),e.TgZ(4,"div"),e.TgZ(5,"h3"),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",4),e.TgZ(10,"button",5),e.NdJ("click",function(){return o.onDeleteClick(o.employee)}),e._UZ(11,"img",6),e.qZA(),e.TgZ(12,"button",7),e.NdJ("click",function(){return o.onEditClick(null==o.employee?null:o.employee.id)}),e._UZ(13,"img",8),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("src","assets/images/user.png",e.LSH),e.xp6(3),e.AsE("",null==o.employee?null:o.employee.firstName," ",null==o.employee?null:o.employee.secondName,""),e.xp6(2),e.Oqu(null==o.employee?null:o.employee.position),e.xp6(3),e.Q6J("src","assets/images/delete-user.png",e.LSH),e.xp6(1),e.Q6J("ngClass",null!=o.employee&&o.employee.blocked?"btn-disabled":"btn-secondary")("disabled",null==o.employee?null:o.employee.blocked),e.xp6(1),e.Q6J("src","assets/images/edit-user.png",e.LSH))},directives:[c.mk],styles:[".card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;align-items:center}.card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.5rem}.card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{width:5rem;height:5rem;margin-right:1rem}.card[_ngcontent-%COMP%]   .btn-actions[_ngcontent-%COMP%]{display:flex;align-items:center}.card[_ngcontent-%COMP%]   .btn-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem;height:2rem}"]}),n})(),Z=(()=>{class n{transform(t,o){return t?o?(o=o.toLowerCase(),t.filter(l=>JSON.stringify(l).toLowerCase().includes(o))):t:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"filter",type:n,pure:!0}),n})();function O(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-employee",4),e.NdJ("deleteEmployeeEvent",function(l){return e.CHM(t),e.oxw().onDeleteEmployee(l)})("editEmployeeEvent",function(l){return e.CHM(t),e.oxw().onEditEmployee(l)}),e.qZA(),e.BQk()}if(2&n){const t=i.$implicit;e.xp6(1),e.Q6J("employee",t)}}const T=[{path:"",component:(()=>{class n{constructor(t,o,l){this.modalService=t,this.employeesService=o,this.router=l,this.searchQuery=""}ngOnInit(){const t=JSON.parse(localStorage.getItem("employees"));t||this.getEmployees(),this.employees=t,this.detectModalActions()}ngOnDestroy(){this.modalSub$&&this.modalSub$.unsubscribe()}getEmployees(){this.employees$=this.employeesService.getEmployees().subscribe(t=>{this.employees=t,localStorage.setItem("employees",JSON.stringify(this.employees))})}onDeleteEmployee(t){this.modalService.open(t)}onEditEmployee(t){this.router.navigate([`edit-employee/${t}`]).then()}detectModalActions(){this.modalSub$=this.modalService.watch().subscribe(({isOpen:t,employee:o})=>{!t&&(null==o?void 0:o.id)&&(this.employees=this.filterEmployeesById(null==o?void 0:o.id),this.handleLocalStorageData())})}filterEmployeesById(t){var o;return null===(o=this.employees)||void 0===o?void 0:o.filter(l=>l.id!==t)}handleLocalStorageData(){this.employees.length>0?localStorage.setItem("employees",JSON.stringify(this.employees)):(localStorage.clear(),this.getEmployees())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d),e.Y36(v),e.Y36(a.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-employee-list"]],decls:8,vars:5,consts:[[1,"px-2"],[1,"input-container"],["placeholder","Search",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"employee","deleteEmployeeEvent","editEmployeeEvent"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h3"),e._uU(2,"Employees list"),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"input",2),e.NdJ("ngModelChange",function(s){return o.searchQuery=s}),e.qZA(),e.qZA(),e.YNc(5,O,2,1,"ng-container",3),e.ALo(6,"filter"),e._UZ(7,"app-confirm-dialog"),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngModel",o.searchQuery),e.xp6(1),e.Q6J("ngForOf",e.xi3(6,2,o.employees,o.searchQuery)))},directives:[m.Fj,m.JJ,m.On,c.sg,M,b],pipes:[Z],encapsulation:2}),n})(),data:{animation:"isLeft"}}];let P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.Bz.forChild(T)],a.Bz]}),n})(),x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.ez,P,u.m]]}),n})()}}]);